# DEAP 遗传算法

[TOC]


## DEAP 进阶

### 多线程实现

### 扩展

### 实现其他模拟进化算法

#### 免疫算法

免疫算法模拟生物免疫系统的机制。这里对应于变量的"个体”被称为抗体。目标函数不再是个体的适应度而是抗体与抗原的亲和力。随机选择抗体依赖于浓度的概念，在大小为$N$的抗体种群中，抗体$X_i$的浓度为
$$
C_{X_i}=\frac{\sharp[X_i]_\epsilon}{N},
$$
其中$[X_i]=\{X_j|a(X_i,X_j)>\epsilon\}$，$a(X_i,X_j)$表示$X_i,X_j$的亲和度（编码相似性）。

**算法**

1. 初始化：随机产生$N_1$个抗体$X_1(0),\cdots ,X_{N_1}(0)$，并从记忆库中选取$N_2$个抗体$X_{N_1+1}(0),\cdots ,X_{N_2}(0)$，（若记忆库为空，则随机选择）构成初始种群$X(0)$。

2. 对每个第$t$代抗体$X_i(t)$，计算

   - 浓度$C_{X_i(t)}$
   - 与抗原的亲和度$J(X_i(t))$，一般是目标函数值
   - 增殖概率$P(X_i(t))\sim C_{X_i(t)}/J(X_i(t))$ (标准化)

   以分布$\{P(X_i(t))\}$从$X(t)$中选择$N_1$个抗体作为母本，和$N_2$个抗体存入记忆库。对母本进行一次遗传操作(变异、杂交)，再连同记忆库中的抗体构成$t+1$代抗体种群。

3. 重复2直到满足终止条件。

免疫算法和遗传算法其实没有多大不同，是遗传算法的改进：削弱浓度高的抗体的增殖概率，同时创建一个记忆库与母本隔离，保留抗体多样性。

## DEAP 复杂应用

### 融合智能局部搜索算法

这或许是GA最有意义的话题。如果遗传算法是受Darwin进化论的启发，那么局部搜索的GA是受Lamarck理论的启发。局部搜索模仿的就是生物后天学习能力，这种能力连同基因共同决定生物是否能够适应环境。变异算子有一定的局部搜索能力，但是不具有确定性，而且也容易跳出局部。而像最速下降法那样的局部搜索算法通常能保证收敛到局部最优解。

#### 局部搜索的GA的基本框架

按照生物学基本认识，生物后天习得的技能不能直接遗传给后代。对于普通生物来说，没有教学过程；而人类是可以把父辈的知识直接教授给后代。我们可以设计出两种方案。

*普通生物GA*

- 设置初始种群，循环执行下述操作
  - 对种群进行遗传操作
  - 以每个个体作为初始值进行局部搜索
  - 将最终搜索到的结果对应的目标函数值作为个体的适应值
- 最后一代进行一次局部搜索，获得最优解。



*高等生物GA*

- 设置初始种群，循环执行下述操作
  - 对种群进行遗传操作
  - 以每个个体作为初始值进行局部搜索
  - 将搜索最终结果作为新的个体，构成新的种群（计算新个体适应值以判断是否收敛）

普通版本，其实只是引入了一种新的计算适应值的方法，并没有改变GA基本框架。而高等版本，实际上延伸了遗传操作，嵌入了新的变异算子。设计这种算法需要了解DEAP的底层实现。



### 模拟退火算法



## DEAP 源码解读



## 其他遗传算法框架

### 其他框架介绍

### 自制框架


